<html>
  <style>
    .tabs {
      height: 34px;
    }
    .tabs-img {
      width: 322px;
      height: 34px;
      display: inline-block;
    }
    .content {
      height: 580px;
      width: 100%;
      margin-top: 8px;
    }
    .footer {
      height: 20px;
      width: 997px;
    }

    .footer-left {
      display: inline-block;
      width: 630px;
      align-items: center;
    }
    .footer-left > div {
      display: inline-block;
      width: 130px;
      height: 20px;
    }
    .footer-left > div > p {
      height: 20px;
      --image-source: "/modules/game_wheel_html/images/balanceBg.png";
      --image-size: 130 20;
      align-items: center;
      height: 20px;
    }

    .footer-right {
      display: inline-block;
      width: 340px;
    }
    .footer-right > button {
      display: inline-block;
      margin-right: 4px;
      float: right;
    }
    button {
      padding: 3px 10px !important;
      color: #c0c0c0;
    }
    button:pressed {
      padding: 3px 10px !important;
    }

    .panel-container {
      width: 100%;
      height: 100%;
    }
    .panel {
      width: 213px;
      height: 100%;
      display: inline-block;
    }
    .panel-center {
      width: 522px;
      height: 100%;
      display: inline-block;
      margin-left: 9px;
      margin-right: 9px;
    }
    .backdrop-wheel {
      --image-source: "/images/game/wheel/backdrop_skillwheel.png";
      --image-size: 522 522;
      width: 522px;
      height: 522px;
      text-align: center;
      position: relative;
    }
    .backdrop-wheel-vocation-overlay {
      width: 522px;
      height: 522px;
      text-align: center;
    }
    .wheel-center-cells {
      position: absolute;
      --ignore-transparent-pixel: true;
    }
    .section-progress-bg {
      --image-source: "/images/game/wheel/progressBg.png";
      --image-size: 205 20;
      width: 205px;
      height: 20px;
      position: relative;
      text-align: center;
      color: #c0c0c0;
      align-items: center;
      margin-top: 4px;
    }
    .section-progress {
      position: absolute;
      height: 19px;
      top: 0;
    }
    .panel-window {
      --image-source: "/images/ui/window.png";
      --image-border: 3;
      position: relative;
    }
    .panel-title {
      position: relative;
      top: 5;
      left: 0;
      text-align: center;
    }
    .change-preset-icon {
      --image-clip: 0 0 20 20;
      width: 20px;
      height: 20px;
    }
    .change-preset-icon:pressed {
      --image-clip: 0 20 20 20;
    }
    .largeperks {
      position: absolute;
      height: 34px;
      width: 34px;
    }
    .revelationBg {
      height: 178px;
      width: 178px;
      position: absolute;
    }
    .largeperks-tl {
      top: 24;
      left: 24;
    }
    .largeperks-tr {
      top: 24;
      right: 24;
    }
    .largeperks-bl {
      bottom: 24;
      left: 24;
    }
    .largeperks-br {
      bottom: 24;
      right: 24;
    }
    .mediumperks {
      position: absolute;
      height: 30px;
      width: 30px;
      --image-source: "/images/game/wheel/icons-skillwheel-mediumperks.png";
    }
    .smallperks {
      position: absolute;
      height: 16px;
      width: 16px;
      --image-source: "/images/game/wheel/icons-skillwheel-smallperks.png";
      --image-size: 16 16;
    }
  </style>
  <window
    placement="center"
    title="Wheel of Destiny"
    onescape="self:hide()"
    style="height: 654px; width: 968px"
    onhover="self.wheel:handleOnHover(-1)"
  >
    <div>
      <img
        class="tabs-img"
        src="/images/game/wheel/wheelMenu.png"
        *image-clip="self.wheel.clip"
        onclick="self:toggleMenu('wheel')"
      />
      <img
        class="tabs-img"
        src="/images/game/wheel/gemMenu.png"
        *image-clip="self.gem.clip"
        onclick="self:toggleMenu('gem')"
      />
      <img
        class="tabs-img"
        src="/images/game/wheel/fragmentMenu.png"
        *image-clip="self.fragment.clip"
        onclick="self:toggleMenu('fragment')"
      />
    </div>

    <div class="content" onhover="self.wheel:handleOnHover(-1)">
      <div *if="self.currentTab == 'wheel'">
        <div class="panel-container" onhover="self.wheel:handleOnHover(-1)">
          <div class="panel">
            <div class="panel-window" style="width: 213px; height: 248px">
              <p class="panel-title">Section</p>
              <div
                style="
                  height: 190px;
                  width: 205px;
                  margin-top: 10px;
                  margin-left: 4px;
                "
              >
                <div *if="self.wheel.currentSelectSlotData ~= nil">
                  <div class="section-progress-bg">
                    <img
                      class="section-progress"
                      src="/images/game/wheel/progressBar.png"
                      *width="((self.wheel.currentSelectSlotData.currentPoints / self.wheel.currentSelectSlotData.totalPoints) * 205)"
                    />
                    <div>
                      <p>
                        <span
                          >{{self.wheel.currentSelectSlotData.currentPoints}}/</span
                        >
                        <span
                          >{{self.wheel.currentSelectSlotData.totalPoints}}</span
                        >
                      </p>
                    </div>
                  </div>
                  <div
                    style="
                      margin-top: 4px;
                      height: 130px;
                      width: 205px;
                      border: 1px red;
                    "
                  >
                    reserved
                  </div>
                  <div
                    style="margin-top: 8px; height: 20px"
                    *if="not self.wheel:handleChangePointsButton('all')"
                  >
                    <div style="background-color: blue">
                      <button
                        style="float: right"
                        onclick="self.wheel:onAddAllPoints()"
                        *disabled="not self.wheel:handleChangePointsButton('add')"
                      >
                        +Max
                      </button>
                      <button
                        *disabled="not self.wheel:handleChangePointsButton('add')"
                        style="float: right"
                        onclick="self.wheel:onAddOnePoint()"
                      >
                        +1
                      </button>
                    </div>
                    <div>
                      <button
                        *disabled="not self.wheel:handleChangePointsButton('remove')"
                        onclick="self.wheel:onRemoveAllPoints()"
                      >
                        -Max
                      </button>
                      <button
                        *disabled="not self.wheel:handleChangePointsButton('remove')"
                        onclick="self.wheel:onRemoveOnePoint()"
                      >
                        -1
                      </button>
                    </div>
                  </div>
                </div>
              </div>
              <div style="width: 205px; margin-left: 4px; color: #c0c0c0">
                <p style="text-align: center; width: 205px">
                  Available Promotion Points
                </p>
                <p style="text-align: center; width: 205px">
                  <span> {{self.wheel.summaryPointsLabel}} </span>
                </p>
              </div>
            </div>
          </div>
          <div class="panel-center" onhover="self.wheel:handleOnHover(-1)">
            <div class="backdrop-wheel">
              <span
                style="position: absolute"
                *for="local data in self.wheel.data"
              >
                <img
                  class="wheel-center-cells"
                  *image-source="data.colorPath"
                  *height="data.height"
                  *width="data.width"
                  *opacity="0.6"
                  image-draw-order="1"
                  *ignore-transparent-pixel="true"
                />
                <img
                  class="wheel-center-cells"
                  *image-source="data.adjacentPath"
                  *height="data.height"
                  *width="data.width"
                  *opacity="0.2"
                  *ignore-transparent-pixel="true"
                  image-draw-order="1"
                />
                <img
                  class="wheel-center-cells"
                  *image-source="data.bgPath"
                  *height="data.height"
                  *width="data.width"
                  onclick="self.wheel:handleSelectSlot(data.id)"
                  onMousePress="self.wheel:handleMousePress(event, data.id)"
                  opacity="0.001"
                  *ignore-transparent-pixel="true"
                  image-draw-order="0"
                />

                <img
                  class="wheel-center-cells"
                  *image-source="data.hoverPath"
                  *opacity="self.wheel.currentHoverSlot == data.id and 0.2 or 0.01"
                  *height="data.height"
                  *width="data.width"
                  onhover="self.wheel:handleOnHover(data.id)"
                  *ignore-transparent-pixel="true"
                />

                <img
                  *if="data.iconClip ~= nil"
                  *image-clip="data.iconClip"
                  *margin-top="data.top"
                  *margin-left="data.left"
                  image-draw-order="1"
                  class="mediumperks"
                  onhover="self.wheel:handleOnHover(data.id)"
                  style="display: block"
                />
                <img
                  *if="data.miniIconClip ~= nil"
                  class="smallperks"
                  *image-clip="data.miniIconClip"
                  style="display: block"
                  *margin-top="data.top + 16"
                  *margin-left="data.left - 3"
                  image-draw-order="1"
                />
              </span>
              <img
                *image-source="self.wheel.backdropVocationOverlay"
                class="backdrop-wheel-vocation-overlay"
                height="522"
                width="522"
                image-draw-order="2"
              />

              <img
                class="wheel-center-cells"
                *if="self.wheel.currentSelectSlotData ~= nil and self.wheel.currentSelectSlotData.borderPath ~= nil"
                *image-source="self.wheel.currentSelectSlotData.borderPath"
                height="522"
                width="522"
                image-draw-order="3"
                *ignore-transparent-pixel="true"
              />

              <img
                src="/images/game/wheel/backdrop_skillwheel_largebonus_front0_TL.png"
                style="
                  position: absolute;
                  height: 178px;
                  width: 178px;
                  left: 0;
                  top: 0;
                "
              />
              <img
                src="/images/game/wheel/backdrop_skillwheel_largebonus_front0_TR.png"
                style="
                  position: absolute;
                  height: 178px;
                  width: 178px;
                  right: 0;
                  top: 0;
                "
              />
              <img
                src="/images/game/wheel/backdrop_skillwheel_largebonus_front0_BL.png"
                style="
                  position: absolute;
                  height: 178px;
                  width: 178px;
                  left: 0;
                  bottom: 0;
                "
              />
              <img
                src="/images/game/wheel/backdrop_skillwheel_largebonus_front0_BR.png"
                style="
                  position: absolute;
                  height: 178px;
                  width: 178px;
                  right: 0;
                  bottom: 0;
                "
              />

              <img
                class="largeperks largeperks-tl"
                src="/images/game/wheel/icons-skillwheel-largeperks.png"
                height="34"
                width="34"
                *image-clip="self.wheel.tlLargePerkClip"
              />
              <img
                class="revelationBg"
                src="/images/game/wheel/wheel-colors/top_left/perkCircle/revelationBg.png"
                height="178"
                width="178"
                style="top: 0; left: 0"
              />
              <img
                class="largeperks largeperks-tr"
                src="/images/game/wheel/icons-skillwheel-largeperks.png"
                height="34"
                width="34"
                *image-clip="self.wheel.trLargePerkClip"
              />
              <img
                class="revelationBg"
                src="/images/game/wheel/wheel-colors/top_right/perkCircle/revelationBg.png"
                height="178"
                width="178"
                style="top: 0; right: 0"
              />
              <img
                class="largeperks largeperks-bl"
                src="/images/game/wheel/icons-skillwheel-largeperks.png"
                height="34"
                width="34"
                *image-clip="self.wheel.blLargePerkClip"
              />
              <img
                class="revelationBg"
                src="/images/game/wheel/wheel-colors/bottom_left/perkCircle/revelationBg.png"
                height="178"
                width="178"
                style="bottom: 0; left: 0"
              />
              <img
                class="largeperks largeperks-br"
                src="/images/game/wheel/icons-skillwheel-largeperks.png"
                height="34"
                width="34"
                *image-clip="self.wheel.brLargePerkClip"
              />
              <img
                class="revelationBg"
                src="/images/game/wheel/wheel-colors/bottom_right/perkCircle/revelationBg.png"
                height="178"
                width="178"
                style="bottom: 0; right: 0"
              />
            </div>
          </div>
          <div class="panel">
            <div class="panel-window" style="width: 213px; height: 100px">
              <p class="panel-title">Dedication Perks</p>
            </div>
            <div
              class="panel-window"
              style="width: 213px; height: 150px; margin-top: 8px"
            >
              <p class="panel-title">Conviction Perks</p>
            </div>
            <div
              class="panel-window"
              style="width: 213px; height: 150px; margin-top: 8px"
            >
              <p class="panel-title">Vessels</p>
            </div>
            <div
              class="panel-window"
              style="width: 213px; height: 120px; margin-top: 8px"
            >
              <p class="panel-title">Revelation Perks</p>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="footer" placement="bottom-left">
      <div class="footer-left">
        <div><p class="footer-texts">gold</p></div>
        <div style="margin-left: 4px">
          <p class="footer-texts">lesser fragments</p>
        </div>
        <div style="margin-left: 4px">
          <p class="footer-texts">greater fragments</p>
        </div>
        <span style="margin-left: 4px"
          ><img
            class="change-preset-icon"
            src="/images/game/wheel/change_preset_icon.png"
          />
          <span style="padding-top: 2px">
            Current Preset: Default-Preset
          </span></span
        >
      </div>

      <div class="footer-right">
        <button onclick="self:hide()">Close</button>
        <button disabled>Reset</button>
        <button disabled>Apply</button>
        <button onclick="self:hide()">Ok</button>
      </div>
    </div>
  </window>
</html>
