<html>
  <style>
    .tabs {
      height: 34px;
    }
    .tabs-img {
      width: 322px;
      height: 34px;
      display: inline-block;
    }
    .content {
      height: 580px;
      width: 100%;
      margin-top: 8px;
      border: 1px red;
    }
    .footer {
      height: 20px;
      background-color: lightblue;
      width: 997px;
    }

    .footer-left {
      display: inline-block;
      width: 600px;
      align-items: center;
    }
    .footer-left > div {
      align-items: center;
      display: inline-block;
      margin-right: 4px;
      width: 130px;
      height: 20px;
    }
    .footer-left > div > p {
      height: 20px;
      --image-source: "/modules/game_wheel_html/images/balanceBg.png";
      --image-size: 130 20;
      align-items: center;
      background-color: black;
      height: 20px;
    }

    .footer-right {
      display: inline-block;
      width: 397px;
    }
    .footer-right > button {
      display: inline-block;
      margin-right: 4px;
    }
    button {
      padding: 3px 10px !important;
      float: right;
    }
    button:pressed {
      padding: 3px 10px !important;
    }

    .panel-container {
      width: 100%;
      height: 100%;
    }
    .panel {
      border: 1px red;
      width: 213px;

      height: 100%;
      display: inline-block;
    }
    .panel-center {
      width: 522px;
      border: 1px blue;
      height: 100%;
      display: inline-block;
      margin-left: 9px;
      margin-right: 9px;
    }
    .backdrop-wheel {
      --image-source: "/images/game/wheel/backdrop_skillwheel.png";
      --image-size: 522 522;
      width: 522px;
      height: 522px;
      text-align: center;
      border: 1px red;
      position: relative;
    }
    .backdrop-wheel-vocation-overlay {
      width: 522px;
      height: 522px;
      text-align: center;
    }
    .wheel-center-cells {
      position: absolute;
      --ignore-transparent-pixel: true;
    }
  </style>
  <window
    placement="center"
    title="Wheel of Destiny"
    onescape="self:hide()"
    style="height: 654px; width: 997px; border: 1px yellow"
    onhover="self.wheel:handleOnHover(-1)"
  >
    <div>
      <img
        class="tabs-img"
        src="/images/game/wheel/wheelMenu.png"
        *image-clip="self.wheel.clip"
        onclick="self:toggleMenu('wheel')"
      />
      <img
        class="tabs-img"
        src="/images/game/wheel/gemMenu.png"
        *image-clip="self.gem.clip"
        onclick="self:toggleMenu('gem')"
      />
      <img
        class="tabs-img"
        src="/images/game/wheel/fragmentMenu.png"
        *image-clip="self.fragment.clip"
        onclick="self:toggleMenu('fragment')"
      />
    </div>

    <div class="content" onhover="self.wheel:handleOnHover(-1)">
      <div *if="self.currentTab == 'wheel'">
        <div class="panel-container" onhover="self.wheel:handleOnHover(-1)">
          <div class="panel">
            <window title="Section" style="width: 180px; height: 248px">
              <div
                *if="self.wheel.currentSelectSlotData ~= nil"
                style="height: 220px"
              >
                <div>1/50</div>
                <div>
                  <button onclick="self.wheel:onChangeSlotPoints('-max')">
                    -Max
                  </button>
                  <button onclick="self.wheel:onChangeSlotPoints(-1)">
                    -1
                  </button>
                  <button onclick="self.wheel:onChangeSlotPoints(1)">+1</button>
                  <button onclick="self.wheel:onChangeSlotPoints('+max')">
                    +Max
                  </button>
                </div>
              </div>
              <div>
                <span> Available Promotion Points </span>
                <span>{{self.wheel.points}}/{{self.wheel.totalPoints}}</span>
              </div>
            </window>
          </div>
          <div class="panel-center" onhover="self.wheel:handleOnHover(-1)">
            <div class="backdrop-wheel">
              <span
                style="position: absolute"
                *for="local data in self.wheel.data"
              >
                <img
                  class="wheel-center-cells"
                  *image-source="data.colorPath"
                  *height="data.height"
                  *width="data.width"
                  *opacity="data.isComplete and 0.75 or (data.isAdjacent and 0.5 or 0.01) or 0.01"
                  image-draw-order="2"
                  *ignore-transparent-pixel="true"
                />
                <img
                  class="wheel-center-cells"
                  *image-source="data.adjacentPath"
                  *height="data.height"
                  *width="data.width"
                  *opacity="data.adjacentPath ~= '' and 0.5 or 0.01"
                  *ignore-transparent-pixel="true"
                  image-draw-order="1"
                />
                <img
                  class="wheel-center-cells"
                  *image-source="data.bgPath"
                  *height="data.height"
                  *width="data.width"
                  onclick="self.wheel:handleSelectSlot(data.id)"
                  opacity="0.001"
                  *ignore-transparent-pixel="true"
                  image-draw-order="0"
                />

                <img
                  class="wheel-center-cells"
                  *image-source="data.hoverPath"
                  *opacity="self.wheel.currentHoverSlot == data.id and 0.2 or 0.01"
                  *height="data.height"
                  *width="data.width"
                  onhover="self.wheel:handleOnHover(data.id)"
                  *ignore-transparent-pixel="true"
                />
                <img
                  class="wheel-center-cells"
                  *image-source="data.borderPath"
                  *height="data.height"
                  *width="data.width"
                  *opacity="self.wheel.currentSelectSlotId == data.id and 1 or 0.01"
                  image-draw-order="3"
                  *ignore-transparent-pixel="true"
                />
              </span>
              <img
                *image-source="self.wheel.backdropVocationOverlay"
                class="backdrop-wheel-vocation-overlay"
                height="522"
                width="522"
                onhover="self.wheel:handleOnHover(-1)"
                image-draw-order="2"
              />
              <!-- 
              <img
                class="wheel-center-cells"
                *if="self.wheel.currentSelectSlotData ~= nil and self.wheel.currentSelectSlotData.borderPath ~= nil"
                *image-source="self.wheel.currentSelectSlotData.borderPath"
                *height="self.wheel.currentSelectSlotData.height"
                *width="self.wheel.currentSelectSlotData.width"
                image-draw-order="3"
                *ignore-transparent-pixel="true"
              /> -->
            </div>
          </div>
          <div class="panel">panel right</div>
        </div>
      </div>
    </div>
    <div class="footer" placement="bottom-left">
      <div class="footer-left">
        <div><p class="footer-texts">gold</p></div>
        <div><p class="footer-texts">lesser fragments</p></div>
        <div><p class="footer-texts">greater fragments</p></div>
        <span>i<span>Current Preset: Default-Preset</span></span>
      </div>

      <div class="footer-right">
        <button onclick="self:hide()">Close</button>
        <button>Reset</button>
        <button>Apply</button>
        <button>Ok</button>
      </div>
    </div>
  </window>
</html>
