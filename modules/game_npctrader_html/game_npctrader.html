<!-- todo
 not work always-show-count: false in html 
 placeholder="Type to search" no sirve en html
 
 
 
 
 
 -->

<style>
    .modal-message {
        width: 400px;
        height: 400px;
        display: block;
        --image-source: /images/ui/window_new;
        --image-border: 6;
        --image-border-top: 27
    }

    .img {
        width: 186px;
        height: 27px;
    }

    .title {
        margin-left: 90px;
        margin-top: 8px;
        display: block;
    }

    .podium {
        width: 65px;
        height: 67px;
        margin-left: 10px;
    }

    .panelConsole {
        width: 360px;
        height: 288px;
        --border: 1 red;
        display: block;
        margin-top: -35px;
        margin-left: 15px;
    }

    .panelBotons {
        width: 360px;
        height: 35px;
        --border: 1 red;
        display: block;
        margin-top: 8px;
        margin-left: 15px;
    }

    .npc-button {
        width: 19px;
        height: 19px;
        --icon-source: /game_npctrader_html/images/icons-npcdialog;
        margin-right: 2px;
    }

    .creature-display {
        width: 64px;
        height: 64px;
        margin-left: 10px;
        margin-top: 10px;
    }

    .inputConsole {
        display: inline-block;
        width: 288px;
        margin-left: 15px;
        margin-top: 5px;
    }

    .bottonChat {
        display: inline;
        margin-left: 2px;
        font: cipsoftFont;
    }

    .leftPanel {
        width: 395px;
        height: 400px;
        float: left;
    }

    .rightPanel {
        width: 195px;
        height: 368px;
        margin-top: 27px;
        margin-left: 2px;
        float: left;
    }

    .verticalSep {
        height: 340px;
        margin-top: 25px;
        float: left;
    }

    .bottonTrade {
        width: 12px;
        height: 12px;
        --image-source: /images/ui/miniwindow_buttons;
        --image-size: 14 14;
        --image-clip: 28 0 14 14;
        margin-top: 7px;
        margin-right: 40px;
    }

    .bottonTrade:hover {
        --image-clip: 28 14 14 14;
    }

    .bottonTrade:active {
        --image-clip: 28 28 14 14;
    }

    .bottonOptions {
        width: 12px;
        height: 12px;
        --image-source: /images/ui/miniwindow_buttons;
        --image-size: 14 14;
        --image-clip: 112 0 14 14;
        margin-top: 7px;
        margin-right: 25px;
    }

    .bottonOptions:hover {
        --image-clip: 112 14 14 14;
    }

    .bottonOptions:active {
        --image-clip: 112 28 14 14;
    }

    .closeButton {
        width: 12px;
        height: 12px;
        --image-source: /images/ui/miniwindow_buttons;
        --image-size: 14 14;
        --image-clip: 28 0 14 14;
        margin-top: 7px;
        margin-right: 10px;
    }

    .closeButton:hover {
        --image-clip: 28 14 14 14;
    }

    .closeButton:active {
        --image-clip: 28 28 14 14;
    }

    /* Trade Panel Styles */
    .tradeHeader {
        padding: 5px;
        height: 50px;
    }

    .tradeCurrencyLabel {
        color: #cccccc;
        font: verdana-11px-antialised;
    }

    .tradeCurrencyName {
        color: #ffffff;
        font: verdana-11px-antialised;
        margin-top: 2px;
    }

    .tradeCurrencyIcon {
        width: 40px;
        height: 40px;
        margin-right: 5px;
        --border-width-top: 1;
        --border-color-top: #141414;
        --border-width-left: 1;
        --border-color-left: #141414;
        --border-width-bottom: 1;
        --border-color-bottom: #747474;
        --border-width-right: 1;
        --border-color-right: #747474;
    }

    .tradeTabs {
        width: 50px;
        height: 34px;
    }

    .tradeTab {
        width: 50px;
        height: -5px;
        /* WTF       height: -5px; */
        margin-bottom: 2px;
        font: verdana-11px-rounded;

    }

    .tradeSearchRow {
        height: 21px;
        margin: 2px 5px;
        border: 1 #444444;
        background: #222222;
    }

    .tradeSearchInput {
        width: 160px;
        color: #aaaaaa;
        margin-left: 5px;
        font: verdana-11px-antialised;
        --placeholder: Type to search;
        --placeholder-color: #6E706F;
    }

    .tradeSearchClear {
        --image-source: /game_cyclopedia/images/button_clear_search;

    }

    .tradeListScroll {
        width: 100%;
        height: 220;
        border: 1 #444444;
        margin: 2 0;
        background-color: #404040;
        --border-width-top: 1;
        --border-color-top: #141414;
        --border-width-left: 1;
        --border-color-left: #141414;
        --border-width-bottom: 1;
        --border-color-bottom: #747474;
        --border-width-right: 1;
        --border-color-right: #747474;
        overflow: scroll;
    }

    .tradeScrollBar {
        width: 15px;
        height: 215px;
        margin-right: 2px;
        background-color: #222222;
    }

    .itemListContainer {
        width: 175px;
        height: 215px;

    }

    .tradeListItem {
        width: 100%;
        height: 48;
        padding: 4 8;
        border: 1 transparent;
        margin-left: 2px;
        margin-top: 2px;
    }

    .tradeListItem:nth-child(odd) {
        background-color: #383838;
    }

    .tradeListItem:hover {
        background-color: #505050;
    }

    .tradeListItem:focus {
        background-color: #d10000;
    }

    .tradeListItemSelected {
        background-color: #224466;
        border: 1 #336699;
    }

    .tradeItemIcon {
        width: 40px;
        height: 40px;
    }

    .tradeItemName {
        color: #c0c0c0;
        font: verdana-11px-antialised;
        width: 120px;
        text-offset: 0 2;
    }

    .tradeItemInfo {
        color: #c0c0c0;
        font: verdana-9px-antialised;
        width: 120px;
    }

    .tradeFooter {
        height: 60px;
        padding: 4px;
        position: relative;
    }

    .tradeTopRow {
        padding-right: 56px;
        height: 14px;
    }

    #amountScrollBar {
        width: 130px;
    }

    .tradePreviewBox {
        width: 40px;
        height: 40px;
        border: 1 #444444;
        background: #1a1a1a;
        border: 1 red;
        position: absolute;
        right: 4px;
        top: 4px;
    }

    .tradeBuyButton {
        width: 29px;
        height: -15px;
        font: verdana-11px-rounded;
        position: absolute;
        right: 2px;
        bottom: 0px;
    }

    .tradeRows {
        margin-top: 2px;
        padding-right: 56px;
    }

    .tradeRow {
        height: 14px;
    }

    .tradeFooterLabel {
        color: #cccccc;
        font: verdana-11px-antialised;
        width: 55px;

        display: inline-block;
    }

    .tradeFooterValue {
        color: #ffffff;
        font: verdana-11px-antialised;

        display: inline-block;
        width: 70px;
        text-align: right;
    }

    .tradeFooterAmountInput {
        width: 68px;
        height: 16px;
        background: #222222;
        border: 1 #444444;
        color: #ffffff;
        text-align: right;
        font: verdana-11px-antialised;
        padding-right: 2px;

        display: inline-block;
    }
</style>

<script type="text">
    self.creatureName = "";
    self.isTradeOpen = false;
    self.tradeItems = {};
    self.selectedItem = nil;
    self.amount = 1;
    self.totalPrice = 0;
    self.totalWeight = "0.00";
</script>

<html>
<uiwindow id="windowTrader" placement="center" *width="self.widthConsole" class="modal-message"
    src="images/ui/miniwindow" onescape="self:unloadHtml()">

    <!-- Panel izquierda -->
    <div class="leftPanel">
        <img class="img" src="images/blue-golden-flag-banner" />
        <label class="title" placement="top-left">{{self.creatureName}}</label>
        <img class="podium" src="images/backdrop-npcdialog-podestal" placement="top-left" />
        <uicreature *outfit="self.outfit" class="creature-display" placement="top-left"></uicreature>
        <UIWidget class="panelConsole"></UIWidget>

        <div id="panelBotons" class="panelBotons" style="display: flex;">
            <button *for="local buttonData in self.buttons" class="npc-button" *tooltip="buttonData.text"
                *icon-clip="buttonData.id * 32 .. ' 0 32 32'" onclick="g_game.talk(buttonData.text)">
            </button>
        </div>
        <input class="inputConsole" />
        <button class="bottonChat">Chat On</button>
    </div>

    <div class="verticalSep VerticalSeparator" *visible="self.isTradeOpen"></div>

    <!-- Panel derecha (Trade) -->
    <div class="rightPanel" *visible="self.isTradeOpen">
        <!-- Header -->
        <div class="tradeHeader" style="display: flex;">
            <div style="display: block; width: 100px">
                <label class="tradeCurrencyLabel" text="Currency:"></label>
                <label class="tradeCurrencyName" text="Gold Coin"></label>
            </div>
            <UIItem class="tradeCurrencyIcon" item-id="3031" item-count="100" always-show-count="false" />
            <div class="tradeTabs" style="display: block; margin-left: auto;">
                <button class="tradeTab" text="Buy"></button>
                <button class="tradeTab" text="Sell"></button>
            </div>
        </div>



        <!-- List Container -->
        <div class="tradeListScroll">
            <div *for="local item in self.tradeItems" class="tradeListItem"
                *class-tradeListItemSelected="self.selectedItem == item" onclick="self:selectTradeItem(item)"
                style="display: flex;">
                <UIItem class="tradeItemIcon" *item="item.ptr" />
                <div style="display: block; margin-left: 5px;">
                    <label class="tradeItemName" *text="item.name"></label>
                    <label class="tradeItemInfo" *text="'Price ' .. item.price .. ', ' .. item.weight .. ' oz'"></label>
                </div>
            </div>
        </div>

        <!-- Search -->

        <div class="tradeSearchRow">
            <input class="tradeSearchInput" style="width: 180px; float: left;" />
            <button class="tradeSearchClear" style="float: right; margin-right: -20px;"></button>
        </div>
        <!-- Footer -->
        <div class="tradeFooter">

            <!-- scrollbar (arriba izquierda) -->
            <div class="tradeTopRow">
                <HorizontalScrollBar id="amountScrollBar" minimum="1" maximum="100" step="1" *value="self.amount"
                    onchange="self:onQuantityValueChange(event.value)" />
            </div>

            <!-- preview (derecha) -->
            <UIItem class="tradePreviewBox item" *item="self.selectedItem and self.selectedItem.ptr or nil" />

            <!-- buy (derecha abajo) -->
            <button class="tradeBuyButton" text="Buy"></button>

            <!-- filas (izquierda) -->
            <div class="tradeRows">
                <div class="tradeRow">
                    <div class="tradeFooterLabel">Amount:</div>
                    <input class="tradeFooterAmountInput" *text="self.amount" />
                </div>

                <div class="tradeRow">
                    <div class="tradeFooterLabel">Price:</div>
                    <label class="tradeFooterValue" *text="self.totalPrice"></label>
                </div>

                <div class="tradeRow">
                    <div class="tradeFooterLabel">Gold:</div>
                    <label class="tradeFooterValue" text="10,004"></label>
                </div>
            </div>

        </div>

    </div>

    <UIButton class="bottonOptions" placement="top-right"></UIButton>
    <UIButton class="closeButton" placement="top-right" onclick="self:unloadHtml()"></UIButton>

</uiwindow>

</html>